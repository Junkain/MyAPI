<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <input type="text" id="lblID" />
    <input type="text" id="lblDescricao" />
    <input type="text" id="lblValorTotal" />

    <button id="btnSubmit">Submit</button><br />
    <button id="btnSalvar">Salvar</button>

    <table id="tblPedido">
        <tr>
            <th>ID</th>
            <th>Descricao</th>
            <th>Valor Total</th>
        </tr>


    </table>

    <script type="text/javascript">
        var btnSubmit = document.getElementById('btnSubmit');
        var btnSalvar = document.getElementById('btnSalvar');

        var id = document.getElementById('lblID');
        var descricao = document.getElementById('lblDescricao');
        var valorTotal = document.getElementById('lblValorTotal');



        
        btnSalvar.onclick = function () {
            var pedido = { id: id, descricao: descricao.value, valorTotal: valorTotal.value };

            $.ajax({
                url: "/api/Pedido/MandarFormulario",
                method: "POST",
                cache: false,
                dataType: "json",
                data: pedido,
                success: function (data) {
                    if (!data) {
                        alert("Nenhum dado enviado");
                    } else {
                        alert("Pedido salvo com sucesso!");
                    }

                }


            })
        }

        btnSubmit.onclick = function () {
            $.ajax({
                url: "/api/Pedido/ObterPedidos",
                method: "GET",
                cache: false,
                dataType: "json",
                success: function (data) {
                    if (!data) {
                        alert("Nenhuma pessoa foi encontrada!");
                    } else {

                        $.each(data, function (i, item) {
                            alert(data[i].id);
                            $('#tblPedido').append('<tr> <td>' + data[i].id +'</td> <td>' + data[i].descricao + '</td> <td>' + data[i].valorTotal + '</td> </tr>');
                        })


                    }

                        
                },
                error: function (xhr) {
                    tratarExcecao(xhr);
                }


            });

        }


    </script>

</body>
</html>